# B. Detaillierte Beschreibung der App (BA-Studierende)
Autoren: Ahmad Kalaf und Afrane Kwame Berquin

## B.1 Beschreibung des Frontends und Opening
CEDmate startet nach der Initialisierung von Firebase in einer AuthGate-Komponente, die den Login-Status ueber Streams abfragt und bis zur Rueckmeldung einen Ladeindikator anzeigt. Ist kein Benutzer angemeldet, erscheint ein zentriertes Formular innerhalb einer Card. Das Formular vereint Login und Registrierung: Nutzer geben einen Benutzernamen und ein Passwort ein; fuer die Registrierung kommen E-Mail-Adresse und optional ein Anzeigename hinzu. Nach der Registrierung wird eine Bestaetigungs-E-Mail versendet, und die App fuehrt in einen Verifizierungsbildschirm, der die E-Mail-Bestaetigung aktiv pruefen laesst. Erst nach erfolgreicher Verifikation erfolgt der Wechsel zum Dashboard.

Nach dem Login bildet der HomeScreen den Einstieg in die fachliche Nutzung. Die erste Nutzerinteraktion ist dort typischerweise das Ausfuellen des medizinischen Profils: Ist keine Anamnese gespeichert, wird ein Hinweis mit direkter Navigation zum Anamneseformular angezeigt. Sobald Anamnesedaten vorliegen, zeigt das Dashboard eine Begruessung, das aktuelle Datum sowie Kachelbereiche fuer schnelle Erfassung, Tageszusammenfassung und weiterfuehrende Bereiche wie Kalender, Statistiken, Datenexport und Wissensinhalte.

Das Layout folgt einem wiederkehrenden Muster: Zentral platzierte Inhalte werden in einem Container mit fester Maximalbreite (600 px) und rahmender Card-Darstellung angezeigt. Die App verwendet eine einheitliche Farbpalette mit gedeckten Gruen- und Beige-Toenen sowie farblich kodierten Akzentfarben fuer die vier zentralen Ereignistypen (Symptom, Stuhlgang, Mahlzeit, Stimmung). Typografie und Interaktionsdesign sind in der Theme-Konfiguration definiert; Eingabefelder, Buttons und AppBars folgen konsistenten Stilregeln. Navigation erfolgt ueber ein Drawer-Menue sowie ueber kontextbezogene Kacheln auf dem Dashboard; die Route-Tabelle im MaterialApp-Rumpf bildet die zentralen Screens ab.

Zielgruppe sind Personen mit chronisch-entzuendlichen Darmerkrankungen, was sich in den Erfassungsfeldern und Modulen unmittelbar widerspiegelt (z. B. Bristol-Stuhlformen, Schubausloeser, Stresslevel). Usability-Aspekte zeigen sich in der Reduktion von Eingabeaufwand durch vordefinierte Auswahllisten, Autocomplete-Felder und vorausgewaehlte Werte (z. B. aktuelle Zeitpunkte). Mehrere Formulare nutzen Verlassen-Bestaetigungen, um Datenverlust zu vermeiden, und geben Rueckmeldung ueber Snackbars. Die App ist standardmaessig auf Deutsch lokalisiert und bietet eine englische Locale als Alternative.

## B.2 Funktionsbeschreibung der Oberflaeche
### B.2.1 Dashboard und Navigation
Das Dashboard dient als zentraler Einstiegspunkt. Es strukturiert die Interaktion in mehrere Kachelgruppen: "Schnell erfassen" verweist auf Symptom-, Stuhlgang-, Mahlzeiten- und Stimmungserfassung; "Heute in Zahlen" zeigt die fuer den aktuellen Tag ermittelten Eintragsanzahlen und fuehrt bei Auswahl direkt in die tagesbezogene Kalenderansicht. Weitere Kacheln verlinken auf die Toilettenkarte, den Datenexport, den Kalender, die Statistikfunktion sowie den Wissensbereich. Ein Drawer ergaenzt die Navigation um Profil, Rueckblick, Impressum und Credits.

### B.2.2 Medizinisches Profil und Benutzerkonto
Die Anamnese-Erfassung ist als strukturiertes Formular umgesetzt. Erfasst werden Geburtsdatum, Geschlecht und Diagnose (Enum-Auswahl), sowie Listen fuer Symptome im Schub, Schubausloeser und weitere Erkrankungen. Listen werden ueber Autocomplete-Eingaben aufgebaut, die Vorschlaege aus vordefinierten Katalogen anbieten; Eintraege lassen sich einzeln entfernen. Das Speichern erfordert eine Validierung und eine explizite Bestaetigung. Im Profil-Screen werden Benutzername und E-Mail angezeigt; Aenderungen werden ueber einen Hinweis auf einen Support-Kontakt angestossen. Ein Passwort-Reset kann direkt aus dem Profil gestartet werden. Das medizinische Profil laesst sich ueber denselben Screen erneut oeffnen und anpassen.

### B.2.3 SymptomRadar
Das Symptommodul ermoeglicht die Erfassung einzelner Symptome mit Bezeichnung, Intensitaet, Startzeit, Dauer und optionalen Notizen. Die Intensitaet wird ueber eine horizontal scrollbare Skala (1-10) ausgewaehlt, die zugleich eine verbale Beschreibung anzeigt. Datum und Uhrzeit lassen sich per Date- und Time-Picker setzen. Eintraege koennen gespeichert, aktualisiert oder geloescht werden; beim Verlassen ohne Speichern erfolgt eine Sicherheitsabfrage. Symptome werden sowohl tagesbezogen im Kalender als auch monatlich im Rueckblick angezeigt und sind direkt aus den Listen editierbar.

### B.2.4 Stuhl-Tagebuch
Die Stuhlgang-Erfassung orientiert sich an der Bristol-Stuhlformen-Skala und stellt die Typen ueber eigene Icons bereit. Nutzer waehlen die Konsistenz, geben die Haeufigkeit pro Tag an und bestimmen das Schmerzlevel ueber eine mehrstufige Icon-Skala. Zusaetzlich koennen Notizen erfasst werden. Aehnlich wie beim Symptommodul sind Speichern, Aktualisieren und Loeschen moeglich, inklusive einer Verlassen-Bestaetigung. In den Monatslisten werden die Eintraege in chronologischer Reihenfolge mit Datum und Uhrzeit dargestellt.

### B.2.5 Ess-Tagebuch
Im Ess-Tagebuch wird eine Mahlzeit durch Bezeichnung, optionale Zutatenlisten, Unvertraeglichkeiten und eine Notiz beschrieben. Zutaten und Unvertraeglichkeiten werden ueber Listenfelder mit Autocomplete gepflegt. In der Monatsansicht lassen sich diese Listen ueber separate Dialoge anzeigen, wodurch die uebersichtliche Darstellung langer Listen erreicht wird. Eintraege koennen editiert oder geloescht werden und erscheinen im Kalender tagesbezogen.

### B.2.6 Seelen-Log
Das Seelen-Log bildet die psychische Befindlichkeit ab. Die Stimmung wird ueber eine 1-5 Skala mit grafischen SVG-Icons gewaehlt, zusaetzlich wird ein Stresslevel von 1 bis 10 erfasst. Optional sind Tagebuchnotizen und frei definierbare Tags moeglich. In den Monatslisten sind Stresslevel, Notizen und Tags sichtbar, wobei Tags bei Bedarf in einem Dialog aufgerufen werden. Auch hier sind Bearbeitung und Loeschung fuer bestehende Eintraege vorgesehen.

### B.2.7 Kalender und Rueckblick
Der Kalender kombiniert eine horizontale Datumsleiste (DatumRad) mit einem klassischen Monatskalender-Dialog. Die Datumsleiste visualisiert Ereignisse ueber farbige Marker pro Tag; die Farben entsprechen den Modulfarben fuer Symptome, Stuhlgang, Mahlzeiten und Stimmung. Ueber vier Filterbuttons kann der Nutzer die tagesbezogenen Listen je Modul ein- und ausblenden. Der Rueckblick dient der monatlichen Analyse und verlinkt auf modulbezogene Monatslisten. Eine Monat-Jahr-Auswahl erlaubt das Filtern der Eintraege auf ein beliebiges Zeitfenster.

### B.2.8 Statistiken und Datenexport
Die Statistikfunktion ruft einen externen Analyse-Service auf und laesst serverseitig Diagramme generieren. Die Rueckgabe erfolgt als Liste von Bild-URLs, die in der App angezeigt werden. Nutzer koennen einzelne Diagramme speichern; auf mobilen Endgeraeten werden die Dateien in das App-Dokumentenverzeichnis geladen und geoeffnet, im Web erfolgt das Oeffnen im Browser. Der Datenexport erzeugt auf gleichem Weg ein PDF fuer den aktuellen Nutzer und stellt es zur weiteren Verwendung bereit.

### B.2.9 Hilfe fuer unterwegs (Toilettenkarte)
Die Toilettenkarte nutzt den aktuellen Standort des Geraets und zeigt in der Karte nahegelegene Toiletten als Marker an. Die Daten stammen aus der Overpass-API (OpenStreetMap) und werden dynamisch anhand des Kartenzooms und Suchradius nachgeladen. Zu jedem Marker kann ein Detailpanel eingeblendet werden, das Name, Kostenstatus, Barrierefreiheit, Zugangsbeschraenkungen und Oeffnungszeiten aus den OSM-Tags anzeigt. Bei fehlender Internetverbindung werden zuletzt geladene Datensaetze aus einem lokalen Cache (SharedPreferences) angezeigt. Ein Floating-Button zentriert die Karte jederzeit auf den aktuellen Standort.

### B.2.10 CED-Wissen und Impressum
Im Wissensbereich werden Eintraege aus einer Firestore-Collection gestreamt. Jeder Eintrag enthaelt Titel, Kurzbeschreibung, Kategorie, Format (Artikel, Video, Checkliste) sowie optionale Links zu Fachgesellschaften. Die Detailansicht zeigt derzeit den hinterlegten Inhaltstext eines Beitrags. Das Impressum- und Credits-Screen stellt Projektrahmen, Datenschutz- und Haftungshinweise, genutzte Quellen und Teamrollen dar.

# C. Detaillierte Beschreibung des technischen Prototyps

## C.1 Technologiestack
Das Frontend ist in Flutter (Dart, SDK ^3.9.2) umgesetzt und nutzt das Material-Design-Widgetsystem. Typografie und UI-Stil werden ueber GoogleFonts (Inter) sowie eine eigene Icon-Schriftart fuer spezifische Symbole ergaenzt. Als Paketbasis kommen unter anderem provider fuer State-Management, table_calendar fuer Kalenderfunktionen, flutter_map und latlong2 fuer die Kartenansicht, flutter_svg fuer SVG-Icons, sowie dio, open_file und url_launcher fuer Datei-Downloads und Oeffnen zum Einsatz. Das Backend der App basiert auf Firebase: Authentifizierung erfolgt ueber Firebase Auth, Persistenz der Fach- und Nutzungsdaten ueber Cloud Firestore. Zusaetzliche Services werden per HTTP eingebunden, u. a. eine externe Analytics-API fuer Diagramme und PDF-Export sowie die Overpass-API fuer OpenStreetMap-Toilettendaten.

## C.2 Architekturkonzept
Das Projekt folgt einer Layer-First-Architektur mit klarer Trennung zwischen Datenmodellen, Repository-Schicht, Service-Schicht und UI. Die Ordnerstruktur in lib/ gliedert sich entsprechend in models/, repositories/, services/, widgets/ und utils/. Jedes Funktionsmodul (z. B. Symptom, Stuhlgang, Mahlzeit, Stimmung, Wissen, Anamnese) besitzt ein Datenmodell, ein Repository fuer den Firestore-Zugriff sowie eine Service-Klasse fuer Validierung und fachliche Regeln. Die UI greift ausschliesslich auf Services zu; dadurch bleibt die Zugriffsschicht austauschbar und UI-Logik von Datenzugriff getrennt. Querschnittliche UI-Elemente wie CEDLayout und CEDDrawer kapseln wiederkehrende Layout- und Navigationsmuster.

## C.3 Datenhaltung und Kommunikation
Die Nutzerverwaltung kombiniert Firebase Auth mit einem Firestore-Mapping: Die Collection usernames/ ordnet einen eindeutigen Benutzernamen einer E-Mail-Adresse und uid zu, waehrend users/{uid} das AppUser-Profil speichert. Fachliche Daten werden pro Nutzer in Subcollections abgelegt: users/{uid}/symptoms fuer Symptome, users/{uid}/stuhlgaenge fuer Stuhlgangseintraege, users/{uid}/mahlzeiten fuer Mahlzeiten, users/{uid}/stimmungen fuer Stimmungseintraege. Das medizinische Profil wird als einzelnes Dokument users/{uid}/anamnesen/anamnese gespeichert. Wissensbeitraege liegen zentral in der Collection wissen/ und werden fuer alle Nutzer bereitgestellt. Zeitstempel werden als Firestore Timestamp gespeichert, um Abfragen nach Datum, Monat und Jahr zu ermoeglichen.

Die Kommunikation mit externen Diensten erfolgt ueber HTTP. Der Statistik- und Export-Service auf cedmate-analytics-api.onrender.com wird per GET aufgerufen und authentifiziert durch einen API-Key. Der Toilettenfinder nutzt einen POST-Request an die Overpass-API, um OSM-Objekte im Umkreis des Nutzerstandorts zu laden. Kartendarstellung und Tiles kommen vom OpenStreetMap-Server; das UI verwendet flutter_map mit einem cancellable Tile-Provider. Offlinefaehigkeit wird fuer die Toilettenkarte durch Caching in SharedPreferences erreicht. Downloads (PDF und Diagramme) werden bei mobilen Clients ueber dio in das App-Dokumentenverzeichnis geschrieben und mit open_file geoeffnet; im Web erfolgt das Oeffnen ueber url_launcher im Browser.

## C.4 State-Management
Das State-Management nutzt Provider als leichtgewichtiges, widgetnahes Konzept. In main.dart werden Repositories und Services ueber MultiProvider und ProxyProvider bereitgestellt, sodass Services ihre Abhaengigkeiten (z. B. AuthService) automatisch erhalten. Ein StreamProvider liefert den aktuellen AppUser, der in der UI ueber context.watch() konsumiert wird. Modulansichten beziehen Daten ueber StreamBuilder und Future-Aufrufe, was die Echtzeit-Updates aus Firestore direkt in der Darstellung widerspiegelt. Lokaler UI-Zustand (Formulare, Ladeindikatoren, Filterzustand) bleibt in StatefulWidgets gekapselt.

## C.5 Begruendung zentraler technischer Entscheidungen
Flutter ermoeglicht eine konsistente, plattformuebergreifende Umsetzung des Prototyps, was angesichts der benoetigten mobilen Funktionen wie Location und Dateizugriff zentral ist. Firestore bietet eine flexible, dokumentenbasierte Struktur, die zu den heterogenen Eintragsarten (Symptom, Stuhlgang, Mahlzeit, Stimmung) passt und durch Streams eine unmittelbare Aktualisierung der UI unterstuetzt. Die Trennung in Repository und Service erhoeht die Wartbarkeit: Validierungslogik (z. B. Eingabebereiche fuer Intensitaet oder Stresslevel) ist nicht in die UI eingebettet und kann konsistent wiederverwendet werden. Provider passt als State-Management zu einem Prototypen mit ueberschaubarem Datenfluss, ohne komplexe Architektur-Overheads zu erzeugen. Die Auslagerung von Statistikberechnungen an eine externe API reduziert die Rechenlast auf dem Endgeraet und erlaubt dennoch eine visuelle Auswertung innerhalb der App. Die Overpass-Anbindung fuer die Toilettenkarte nutzt vorhandene OpenStreetMap-Daten und ermoeglicht standortbasierte Hilfe; das lokale Caching adressiert Nutzungssituationen mit instabiler Verbindung. Das Authentifizierungsmodell mit Benutzernamen-Login und E-Mail-Verifikation baut auf Firebase Auth auf und ergaenzt dies durch ein Firestore-Mapping, um eine nutzerfreundliche Anmeldung ueber Benutzernamen im UI zu ermoeglichen.
